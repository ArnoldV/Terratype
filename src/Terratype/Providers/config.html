<div class="ng-cloak terratype" ng-controller="terratype" ng-init="initConfig()" ng-disabled="!loading">
    <div class="umb-el-wrap control-group">
        <label for="terratype_{{identifier}}_provider" class="control-label">
            Map Provider:
            <small>
                Select which system you wish to use to display maps
            </small>
        </label>
        <div class="controls" ng-if="bag.providers.length != 0">
            <select id="terratype_{{identifier}}_provider" ng-model="model.value.provider.id" class="umb-editor" ng-change="setProvider(model.value.provider.id)" ng-options="p.id as p.name for p in bag.providers">
            </select>
        </div>
    </div>
    <br />
    <fieldset ng-show="bag.provider.id != null" style="padding-left:15px;">
        <a href="{{bag.provider.referenceUrl}}" target="_blank">
            <legend style="padding-left:36px;background-image:url({{bag.provider.image}});background-size:auto 32px;background-repeat: no-repeat;">
                {{bag.provider.name}}
            </legend>
        </a>
        <p>{{bag.provider.description}}</p>
        <br />
        <section>
            <h4 style="background-color:#dfdfdf;padding: 5px 0 5px 5px;margin-left:-5px;">
                Configure
            </h4>
            <div class="umb-el-wrap control-group">
                <label for="terratype_{{identifier}}_coordinatesystem" class="control-label">
                    Coordinate System:
                    <small>
                        Which Geodetic Coordinate System do you wish to use to present and store locations
                    </small>
                </label>
                <div class="controls" ng-if="bag.provider && bag.provider.coordinateSystems && bag.provider.coordinateSystems.length != 0">
                    <select id="terratype_{{identifier}}_coordinatesystem" ng-model="model.value.position.id" class="umb-editor" ng-change="setCoordinateSystems(model.value.position.id)" ng-disabled="!model.value.provider.id" ng-options="c.id as c.name for c in bag.provider.coordinateSystems">
                    </select>
                    <small ng-show="model.value.position.id">
                        <a href="{{bag.provider.position.referenceUrl}}" target="_blank">
                            {{bag.provider.position.description}}
                        </a>
                    </small>
                </div>
            </div>
            <br />
            <ng-include src="bag.provider.views.definition">
            </ng-include>
        </section>
        <section>
            <h4 style="background-color:#dfdfdf;padding: 5px 0 5px 5px;margin-left:-5px;">
                Apperance
            </h4>
            <div class="umb-el-wrap control-group">
                <label for="terratype_{{identifier}}_height" class="control-label">
                    Height:
                    <small>
                        The height of the map as displayed to the content editor in pixels
                    </small>
                </label>
                <div class="controls">
                    <input type="number" id="terratype_{{identifier}}_height" ng-model="model.value.height" class="umb-editor" placeholder="Height of map in pixels" />
                </div>
            </div>
            <ng-include src="bag.provider.views.apperance">
            </ng-include>
        </section>


    </fieldset>

    <div ng-show="error != null" style="color:red;">
        <p ng-bind-html="error">
        </p>
    </div>


    <br />
    <br />
    <br />
    <br />

    <textarea>
        {{model.value}}
    </textarea>
    <br />
    <br />
    <br />
    <br />

</div>
